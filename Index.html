<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Study Web | STD 12 Tests</title>
  <link rel="stylesheet" href="assets/style.css">
</head>
<body>
  <header>
    <h1>ğŸ“˜ My Study Web</h1>
    <p>Select Class â†’ Subject â†’ Test</p>
  </header>

  <section id="classes"></section>
  <section id="subjects"></section>
  <section id="tests"></section>

  <script>
    // Load data.json from Netlify
    const DATA_URL = 'https://hdhdhsjsjsjdjsjshdjdhdjdjdjdu.netlify.app/data.json';
    let DATA = {};

    async function loadData() {
      try {
        const res = await fetch(DATA_URL);
        DATA = await res.json();
        showClasses();
      } catch (e) {
        document.body.innerHTML = "<p>âš ï¸ Unable to load data.json</p>";
        console.error(e);
      }
    }

    function clearSections() {
      document.getElementById('subjects').innerHTML = '';
      document.getElementById('tests').innerHTML = '';
    }

    function showClasses() {
      const classesDiv = document.getElementById('classes');
      classesDiv.innerHTML = '<h2>ğŸ“˜ Select Class:</h2>';
      for (const std in DATA) {
        const btn = document.createElement('button');
        btn.textContent = std;
        btn.onclick = () => showSubjects(std);
        classesDiv.appendChild(btn);
      }
      clearSections();
    }

    function showSubjects(std) {
      const subjectsDiv = document.getElementById('subjects');
      subjectsDiv.innerHTML = `<h2>ğŸ“š ${std} Subjects:</h2>`;
      const subjects = Object.keys(DATA[std]);
      subjects.forEach(subject => {
        const btn = document.createElement('button');
        btn.textContent = subject;
        btn.onclick = () => showTests(std, subject);
        subjectsDiv.appendChild(btn);
      });
      document.getElementById('tests').innerHTML = '';
    }

    function showTests(std, subject) {
      const testsDiv = document.getElementById('tests');
      testsDiv.innerHTML = `<h2>ğŸ§ª ${subject} Tests:</h2>`;
      DATA[std][subject].forEach(test => {
        const a = document.createElement('a');
        a.textContent = test.label;
        a.href = test.path;
        a.target = '_blank';
        testsDiv.appendChild(a);
        testsDiv.appendChild(document.createElement('br'));
      });
    }

    loadData();
  </script>
</body>
</html>
